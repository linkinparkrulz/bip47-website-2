<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation - BIP47 & PayNyms</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Documentation page specific styles */
        .docs-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: var(--space-xl);
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--space-xl);
        }

        @media (max-width: 900px) {
            .docs-container {
                grid-template-columns: 1fr;
            }
            .sidebar {
                position: static;
                margin-bottom: var(--space-lg);
            }
        }

        .sidebar {
            position: sticky;
            top: var(--space-xl);
            height: fit-content;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
        }

        .sidebar-title {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: var(--space-md);
            font-weight: 600;
        }

        .sidebar-nav {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar-nav li {
            margin-bottom: var(--space-xs);
        }

        .sidebar-nav a {
            display: block;
            padding: var(--space-sm) var(--space-md);
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.85rem;
            border-radius: var(--radius-sm);
            transition: all var(--transition-fast);
            border-left: 2px solid transparent;
        }

        .sidebar-nav a:hover {
            background: var(--bg-primary);
            color: var(--accent-primary);
            border-left-color: var(--border-default);
        }

        .sidebar-nav a.active {
            background: rgba(74, 222, 128, 0.1);
            color: var(--accent-primary);
            border-left-color: var(--accent-primary);
            font-weight: 500;
        }

        .content {
            min-width: 0;
        }

        .doc-section {
            margin-bottom: var(--space-2xl);
            scroll-margin-top: var(--space-xl);
        }

        .doc-section h2 {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: var(--accent-primary);
            margin-bottom: var(--space-md);
            padding-bottom: var(--space-sm);
            border-bottom: 1px solid var(--border-subtle);
        }

        .doc-section h3 {
            font-size: 1.1rem;
            color: var(--text-primary);
            margin-top: var(--space-lg);
            margin-bottom: var(--space-sm);
        }

        .doc-section h4 {
            font-size: 0.95rem;
            color: var(--text-secondary);
            margin-top: var(--space-md);
            margin-bottom: var(--space-sm);
        }

        .doc-section p {
            color: var(--text-secondary);
            margin-bottom: var(--space-md);
            line-height: 1.7;
        }

        .doc-section ul, .doc-section ol {
            color: var(--text-secondary);
            margin-bottom: var(--space-md);
            padding-left: var(--space-lg);
        }

        .doc-section li {
            margin-bottom: var(--space-xs);
            line-height: 1.6;
        }

        .doc-section code {
            background: var(--bg-primary);
            padding: 0.2em 0.4em;
            border-radius: var(--radius-sm);
            font-family: var(--font-data);
            font-size: 0.85em;
            color: var(--accent-primary);
        }

        .code-block {
            background: var(--bg-primary);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md);
            margin: var(--space-md) 0;
            overflow: hidden;
        }

        .code-header {
            background: var(--bg-surface);
            padding: var(--space-sm) var(--space-md);
            font-size: 0.75rem;
            color: var(--text-muted);
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .code-header .lang {
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .code-block pre {
            padding: var(--space-md);
            margin: 0;
            overflow-x: auto;
            font-family: var(--font-data);
            font-size: 0.8rem;
            line-height: 1.6;
            color: var(--text-primary);
        }

        .code-block code {
            background: transparent;
            padding: 0;
            color: inherit;
        }

        /* Syntax highlighting colors */
        .code-keyword { color: #ff79c6; }
        .code-string { color: #f1fa8c; }
        .code-comment { color: #6272a4; }
        .code-function { color: #50fa7b; }
        .code-number { color: #bd93f9; }
        .code-operator { color: #ff79c6; }

        .endpoint-card {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md);
            margin: var(--space-md) 0;
            overflow: hidden;
        }

        .endpoint-header {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            background: var(--bg-surface);
            border-bottom: 1px solid var(--border-subtle);
        }

        .http-method {
            font-size: 0.7rem;
            font-weight: 600;
            padding: 0.2em 0.5em;
            border-radius: var(--radius-sm);
            text-transform: uppercase;
        }

        .http-get { background: rgba(34, 211, 238, 0.2); color: #22d3ee; }
        .http-post { background: rgba(74, 222, 128, 0.2); color: #4ade80; }

        .endpoint-path {
            font-family: var(--font-data);
            font-size: 0.85rem;
            color: var(--text-primary);
        }

        .endpoint-body {
            padding: var(--space-md);
        }

        .endpoint-body p {
            margin-bottom: var(--space-sm);
            font-size: 0.85rem;
        }

        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin: var(--space-md) 0;
            font-size: 0.8rem;
        }

        .param-table th,
        .param-table td {
            padding: var(--space-sm);
            text-align: left;
            border-bottom: 1px solid var(--border-subtle);
        }

        .param-table th {
            color: var(--text-muted);
            font-weight: 500;
            text-transform: uppercase;
            font-size: 0.7rem;
            letter-spacing: 0.05em;
        }

        .param-table td {
            color: var(--text-secondary);
        }

        .param-table code {
            font-size: 0.8em;
        }

        .info-box {
            background: rgba(34, 211, 238, 0.05);
            border-left: 3px solid var(--accent-secondary);
            padding: var(--space-md);
            border-radius: var(--radius-md);
            margin: var(--space-md) 0;
        }

        .info-box p {
            margin: 0;
            font-size: 0.85rem;
        }

        .warning-box {
            background: rgba(245, 158, 11, 0.05);
            border-left: 3px solid var(--accent-warning);
            padding: var(--space-md);
            border-radius: var(--radius-md);
            margin: var(--space-md) 0;
        }

        .warning-box p {
            margin: 0;
            font-size: 0.85rem;
        }

        .nav-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-xl);
            padding-bottom: var(--space-md);
            border-bottom: 1px solid var(--border-subtle);
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            padding-left: var(--space-xl);
            padding-right: var(--space-xl);
        }

        .back-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color var(--transition-fast);
        }

        .back-link:hover {
            color: var(--accent-primary);
        }

        .section-intro {
            font-size: 1rem;
            color: var(--text-muted);
            margin-bottom: var(--space-lg);
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav-bar">
            <a href="/" class="back-link">← Back to Home</a>
            <span style="color: var(--text-muted); font-size: 0.8rem;">[DOCUMENTATION]</span>
        </div>

        <div class="main-content">
            <div class="header">
                <h1>> DOCUMENTATION</h1>
                <div class="subtitle">BIP47 protocol, Auth47 specification, and API references</div>
                <br/>
            </div>

            <div class="docs-container">
                <aside class="sidebar">
                    <div class="sidebar-title">Contents</div>
                    <ul class="sidebar-nav">
                        <li><a href="#getting-started" class="active">Getting Started</a></li>
                        <li><a href="#bip47-protocol">BIP47 Protocol</a></li>
                        <li><a href="#auth47-spec">Auth47 Specification</a></li>
                        <li><a href="#paynym-api">Paynym API</a></li>
                        <li><a href="#code-examples">Code Examples</a></li>
                        <li><a href="#resources">Resources</a></li>
                    </ul>
                </aside>

                <main class="content">
                    <!-- Getting Started -->
                    <section class="doc-section" id="getting-started">
                        <h2>> Getting Started</h2>
                <p class="section-intro">
                    Welcome to the BIP47 documentation. Here you'll find everything you need to understand 
                    and implement reusable payment codes, Auth47 authentication, and Paynym identity services.
                </p>

                <h3>What is BIP47?</h3>
                <p>
                    BIP47 defines a protocol for reusable payment codes in Bitcoin. Unlike traditional 
                    addresses that should only be used once, payment codes allow you to share a single 
                    identifier that others can use to generate unlimited unique payment addresses for you.
                </p>

                <h3>What is Auth47?</h3>
                <p>
                    Auth47 is an authentication protocol built on top of BIP47. It uses the notification 
                    address of a payment code to verify ownership, enabling passwordless authentication 
                    using Bitcoin wallets.
                </p>

                <h3>What is Paynym?</h3>
                <p>
                    Paynym is a social layer built on BIP47 payment codes. It provides human-readable 
                    identifiers (like <code>+littlevoice</code>) and a social graph of followers/following, 
                    making it easier to discover and pay other Bitcoin users.
                </p>

                <div class="info-box">
                    <p>
                        <strong>Quick Start:</strong> New to BIP47? Start with the 
                        <a href="/lab" style="color: var(--accent-secondary);">BIP47 LAB</a> 
                        for an interactive walkthrough of how payment codes work.
                    </p>
                </div>
            </section>

            <!-- BIP47 Protocol -->
            <section class="doc-section" id="bip47-protocol">
                <h2>> BIP47 Protocol</h2>
                <p class="section-intro">
                    BIP47 enables reusable payment codes that generate unique addresses for each transaction, 
                    preserving privacy while maintaining the convenience of a single identifier.
                </p>

                <h3>Payment Codes</h3>
                <p>
                    A BIP47 payment code is a Base58Check-encoded string that starts with "PM8T". 
                    It contains a version byte, features byte, sign byte, x-coordinate of the public key, 
                    and chain code.
                </p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="lang">Example</span>
                    </div>
                    <pre><code>PM8TJYp8zHvhimVNRjUcEuULfmvmUML6YTbTSnU69MYy93AzsXELFLaVjpxc5mxDex7R8ttgtL1tGAt2TshZAoFeB5zn4c9nRo4oZpmuyuo4FTpUrd</code></pre>
                </div>

                <h3>Notification Address</h3>
                <p>
                    Each payment code has a notification address derived from the public key at index 0. 
                    This address is used to signal the creation of a payment channel between two parties.
                </p>

                <h4>Creating a Payment Channel</h4>
                <ol>
                    <li>Alice obtains Bob's payment code</li>
                    <li>Alice creates a notification transaction containing her encrypted payment code</li>
                    <li>Bob monitors his notification address and detects Alice's transaction</li>
                    <li>Both parties can now derive unique payment addresses for each other</li>
                </ol>

                <h4>Address Derivation</h4>
                <p>
                    Payment addresses are derived using ECDH (Elliptic Curve Diffie-Hellman) to create 
                    a shared secret, which is then used to modify the public key derivation:
                </p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="lang">Formula</span>
                    </div>
                    <pre><code>// Alice derives payment address for Bob
S = a × B  // Shared secret (Alice's private key × Bob's public key)
s = SHA256(S_x)  // x-coordinate of shared secret
K = B + s×G  // Payment address public key

// Bob derives private key to spend
k = b + s  // Bob's private key + shared secret scalar</code></pre>
                </div>

                <h3>Key Features</h3>
                <ul>
                    <li><strong>Reusable:</strong> Share one code, receive unlimited payments</li>
                    <li><strong>Private:</strong> Each payment uses a unique address</li>
                    <li><strong>Non-interactive:</strong> Sender doesn't need receiver's cooperation</li>
                    <li><strong>Deterministic:</strong> Same addresses derived by both parties</li>
                </ul>

                <div class="warning-box">
                    <p>
                        <strong>Important:</strong> The notification transaction requires a small amount 
                        of Bitcoin (typically 546 sats) to be sent to the notification address. This is 
                        a one-time cost per payment channel.
                    </p>
                </div>
            </section>

            <!-- Auth47 Specification -->
            <section class="doc-section" id="auth47-spec">
                <h2>> Auth47 Specification</h2>
                <p class="section-intro">
                    Auth47 provides a challenge-response authentication protocol using BIP47 payment codes. 
                    It enables passwordless login by proving ownership of a payment code's notification address.
                </p>

                <h3>Protocol Overview</h3>
                <p>
                    Auth47 uses the notification address of a BIP47 payment code as the identity. 
                    Authentication is performed by signing a challenge with the private key corresponding 
                    to the notification address.
                </p>

                <h3>Authentication Flow</h3>
                <ol>
                    <li><strong>Challenge Generation:</strong> Server generates a unique nonce and creates an Auth47 URI</li>
                    <li><strong>QR Display:</strong> User scans the QR code with a compatible wallet</li>
                    <li><strong>Signature:</strong> Wallet signs the challenge using the notification address private key</li>
                    <li><strong>Verification:</strong> Server verifies the signature against the claimed payment code</li>
                    <li><strong>Authentication:</strong> Upon successful verification, user is authenticated</li>
                </ol>

                <h3>Auth47 URI Format</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="lang">URI Format</span>
                    </div>
                    <pre><code>auth47://<nonce>?c=<callback_url>&e=<expiry_timestamp></code></pre>
                </div>

                <h4>Parameters</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>nonce</code></td>
                            <td>Unique challenge identifier (16 bytes hex)</td>
                        </tr>
                        <tr>
                            <td><code>c</code></td>
                            <td>Callback URL for wallet to POST response</td>
                        </tr>
                        <tr>
                            <td><code>e</code></td>
                            <td>Unix timestamp when challenge expires</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Verification Request</h3>
                <p>
                    The wallet POSTs the following JSON to the callback URL:
                </p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="lang">JSON</span>
                    </div>
                    <pre><code>{
  "auth47_response": "auth47://<nonce>?c=<callback>&e=<expiry>",
  "challenge": "auth47://<nonce>?c=<callback>&e=<expiry>",
  "nym": "PM8T...",
  "signature": "<base64_signature>"
}</code></pre>
                </div>

                <h3>Signature Verification</h3>
                <p>
                    The server verifies the signature using the notification address derived from the 
                    claimed payment code. The signature must be a valid Bitcoin message signature of the 
                    challenge URI.
                </p>

                <h4>Security Considerations</h4>
                <ul>
                    <li>Nonces expire after 5 minutes to prevent replay attacks</li>
                    <li>Each nonce can only be used once</li>
                    <li>Signatures must use the Bitcoin Message Signing format</li>
                    <li>Servers should validate the expiry timestamp</li>
                </ul>

                <div class="info-box">
                    <p>
                        <strong>Try it:</strong> Test Auth47 authentication on the 
                        <a href="/auth" style="color: var(--accent-secondary);">Auth47 Login</a> page.
                    </p>
                </div>
            </section>

            <!-- Paynym API -->
            <section class="doc-section" id="paynym-api">
                <h2>> Paynym API</h2>
                <p class="section-intro">
                    The Paynym API provides endpoints for creating and managing Paynym identities, 
                    following other Paynyms, and retrieving payment code information.
                </p>

                <h3>Base URL</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="lang">Base URL</span>
                    </div>
                    <pre><code>https://paynym.rs/api/v1/</code></pre>
                </div>

                <h3>Public Endpoints</h3>
                <p>
                    These endpoints do not require authentication and can be used to look up 
                    Paynym information.
                </p>

                <h4>Create Paynym</h4>
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/create</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Create a new Paynym entry in the database.</p>
                        <table class="param-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>code</code></td>
                                    <td>string</td>
                                    <td>A valid BIP47 payment code</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h4>Get Token</h4>
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/token</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Update the verification token for authenticated requests. Tokens are valid for 24 hours.</p>
                        <table class="param-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>code</code></td>
                                    <td>string</td>
                                    <td>A valid BIP47 payment code</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h4>Lookup Nym</h4>
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/nym</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Retrieve all known information about a Paynym account.</p>
                        <table class="param-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>nym</code></td>
                                    <td>string</td>
                                    <td>Payment code, nymID, or nymName</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="lang">Response</span>
                            </div>
                            <pre><code>{
  "codes": [
    {
      "claimed": true,
      "segwit": true,
      "code": "PM8T..."
    }
  ],
  "followers": [{ "nymId": "5iEpU..." }],
  "following": [],
  "nymID": "wXGgdC...",
  "nymName": "littlevoice"
}</code></pre>
                        </div>
                    </div>
                </div>

                <h3>Authenticated Endpoints</h3>
                <p>
                    These endpoints require authentication via the notification address signature.
                </p>

                <h4>Authentication Headers</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>Header</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>auth-token</code></td>
                            <td>The token obtained from /token endpoint</td>
                        </tr>
                    </tbody>
                </table>

                <h4>Claim Payment Code</h4>
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/claim</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Claim ownership of a payment code by signing the token with the notification address.</p>
                        <table class="param-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>signature</code></td>
                                    <td>string</td>
                                    <td>Token signed by BIP47 notification address</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h4>Follow/Unfollow</h4>
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/follow</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Follow another Paynym account.</p>
                        <table class="param-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>target</code></td>
                                    <td>string</td>
                                    <td>The nymID to follow</td>
                                </tr>
                                <tr>
                                    <td><code>signature</code></td>
                                    <td>string</td>
                                    <td>Token signed by notification address</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/unfollow</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Unfollow a Paynym account. Same parameters as /follow.</p>
                    </div>
                </div>

                <h4>Add Payment Code</h4>
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="http-method http-post">POST</span>
                        <span class="endpoint-path">/nym/add</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Add a new payment code to an existing Nym.</p>
                        <table class="param-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>nym</code></td>
                                    <td>string</td>
                                    <td>Existing nymID, code, or nymName</td>
                                </tr>
                                <tr>
                                    <td><code>code</code></td>
                                    <td>string</td>
                                    <td>New payment code to add</td>
                                </tr>
                                <tr>
                                    <td><code>signature</code></td>
                                    <td>string</td>
                                    <td>Token signed by primary payment code</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="info-box">
                    <p>
                        <strong>Tip:</strong> Use the 
                        <a href="/paynym" style="color: var(--accent-secondary);">Paynym Explorer</a> 
                        to look up Paynym details and see the API in action.
                    </p>
                </div>
            </section>

            <!-- Code Examples -->
            <section class="doc-section" id="code-examples">
                <h2>> Code Examples</h2>
                <p class="section-intro">
                    Ready-to-use code snippets for common BIP47 and Auth47 operations.
                </p>

                <h3>Generate Payment Code</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="lang">JavaScript</span>
                    </div>
                    <pre><code>import ecc from '@bitcoinerlab/secp256k1';
import { BIP32Factory } from 'bip32';
import { BIP47Factory } from '@samouraiwallet/bip47';

const bip32 = BIP32Factory(ecc);
const bip47 = BIP47Factory(ecc);

// Generate from mnemonic
const seed = bip32.mnemonicToSeedSync(mnemonic);
const root = bip32.fromSeed(seed);
const account = root.derivePath("m/47'/0'/0'");

const paymentCode = bip47.fromBip32Node(account);
console.log(paymentCode.toBase58());
// PM8TJYp8zHvhimVNRjUcEuULfmvmUML6YTbTSnU69MYy93AzsXELFLaVjpxc5mxDex7R8ttgtL1tGAt2TshZAoFeB5zn4c9nRo4oZpmuyuo4FTpUrd</code></pre>
                </div>

                <h3>Derive Payment Address</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="lang">JavaScript</span>
                    </div>
                    <pre><code>// Alice derives address to pay Bob
const alice = bip47.fromBip32Node(aliceAccount);
const bob = bip47.fromBase58(bobPaymentCode);

// Get payment address at index 0
const paymentAddress = alice.getPaymentAddress(bob, 0, 'p2wpkh');
console.log(paymentAddress);
// tb1q8gpft5rpju8lcshfa6at44pev5y0q7kzfwqpg</code></pre>
                </div>

                <h3>Verify Auth47 Signature</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="lang">JavaScript</span>
                    </div>
                    <pre><code>import { Auth47Verifier } from '@samouraiwallet/auth47';

const verifier = new Auth47Verifier(ecc, callbackUrl);

const proof = {
  auth47_response: challengeUri,
  challenge: challengeUri,
  nym: paymentCode,
  signature: base64Signature
};

const result = verifier.verifyProof(proof, 'bitcoin');
if (result.result === 'ok') {
  console.log('Authentication successful!');
} else {
  console.error('Authentication failed:', result.error);
}</code></pre>
                </div>

                <h3>Lookup Paynym</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="lang">JavaScript</span>
                    </div>
                    <pre><code>// Lookup by nymID, nymName, or payment code
const response = await fetch('https://paynym.rs/api/v1/nym/', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ nym: '+littlevoice' })
});

const data = await response.json();
console.log(data.nymName);  // "littlevoice"
console.log(data.nymID);    // "wXGgdC..."
console.log(data.codes[0].code);  // Payment code</code></pre>
                </div>

                <h3>Get Paynym Avatar</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="lang">URL Pattern</span>
                    </div>
                    <pre><code>// Avatar URL format
https://paynym.rs/{payment_code}/avatar

// Example
https://paynym.rs/PM8TJYp8zHvhimVNRjUcEuULfmvmUML6YTbTSnU69MYy93AzsXELFLaVjpxc5mxDex7R8ttgtL1tGAt2TshZAoFeB5zn4c9nRo4oZpmuyuo4FTpUrd/avatar</code></pre>
                </div>
            </section>

            <!-- Resources -->
            <section class="doc-section" id="resources">
                <h2>> Resources</h2>
                <p class="section-intro">
                    Official specifications, libraries, and community resources for BIP47 and Paynym.
                </p>

                <h3>Official Specifications</h3>
                <ul>
                    <li>
                        <a href="https://github.com/bitcoin/bips/blob/master/bip-0047.mediawiki" target="_blank" rel="noopener noreferrer" style="color: var(--accent-secondary);">
                            BIP47 Specification
                        </a> - Official Bitcoin Improvement Proposal
                    </li>
                    <li>
                        <a href="https://github.com/Dojo-Open-Source-Project/bip47" target="_blank" rel="noopener noreferrer" style="color: var(--accent-secondary);">
                            BIP47 Github Repository
                        </a> - Authentication protocol specification
                    </li>
                    <li>
                        <a href="https://github.com/Dojo-Open-Source-Project/auth47" target="_blank" rel="noopener noreferrer" style="color: var(--accent-secondary);">
                            Auth47 Github Repository
                        </a> - Authentication protocol specification
                    </li>
                </ul>

                <h3>Libraries</h3>
                <ul>
                    <li>
                        <a href="https://www.npmjs.com/package/@samouraiwallet/bip47" target="_blank" rel="noopener noreferrer" style="color: var(--accent-secondary);">
                            @samouraiwallet/bip47
                        </a> - BIP47 implementation for JavaScript/TypeScript
                    </li>
                    <li>
                        <a href="https://www.npmjs.com/package/@samouraiwallet/auth47" target="_blank" rel="noopener noreferrer" style="color: var(--accent-secondary);">
                            @samouraiwallet/auth47
                        </a> - Auth47 verification library
                    </li>
                    <li>
                        <a href="https://www.npmjs.com/package/@bitcoinerlab/secp256k1" target="_blank" rel="noopener noreferrer" style="color: var(--accent-secondary);">
                            @bitcoinerlab/secp256k1
                        </a> - secp256k1 cryptography library
                    </li>
                </ul>

                <h3>Wallets Supporting BIP47</h3>
                <ul>
                    <li>
                        <a href="https://samouraiwallet.com" target="_blank" rel="noopener noreferrer" style="color: var(--accent-secondary);">
                            Samourai Wallet
                        </a> - Android wallet with full BIP47 support
                    </li>
                    <li>
                        <a href="https://sparrowwallet.com" target="_blank" rel="noopener noreferrer" style="color: var(--accent-secondary);">
                            Sparrow Wallet
                        </a> - Desktop wallet with Paynym integration
                    </li>
                    <li>
                        <a href="https://bluewallet.io" target="_blank" rel="noopener noreferrer" style="color: var(--accent-secondary);">
                            BlueWallet
                        </a> - Mobile wallet with BIP47 support
                    </li>
                    <li>
                        <a href="https://stackwallet.com" target="_blank" rel="noopener noreferrer" style="color: var(--accent-secondary);">
                            Stack Wallet
                        </a> - Multi-coin wallet with Paynym integration
                    </li>
                    <li>
                        <a href="https://ashigaru.rs" target="_blank" rel="noopener noreferrer" style="color: var(--accent-secondary);">
                            Ashigaru
                        </a> - Auth47-compatible wallet
                    </li>
                </ul>

                <h3>Community</h3>
                <ul>
                    <li>
                        <a href="https://paynym.rs" target="_blank" rel="noopener noreferrer" style="color: var(--accent-secondary);">
                            Paynym.rs
                        </a> - Paynym directory and API
                    </li>
                    <li>
                        <a href="https://billandkeonne.org" target="_blank" rel="noopener noreferrer" style="color: var(--accent-secondary);">
                            Support Bill & Keonne
                        </a> - Sign the petition, donate and get the word out 
                    </li>
                                        <li>
                        <a href="https://twitter.com/linkinparkrulz_" target="_blank" rel="noopener noreferrer" style="color: var(--accent-secondary);">
                            TSB Signal Chat
                        </a> - A group chat for BIP47/PayNyms enjoyers. Contact Jordan to join. 
                    </li>
                </ul>

                <div class="info-box">
                    <p>
                        <strong>Contribute:</strong> Found an error or want to improve this documentation? 
                        Submit a pull request to the 
                        <a href="https://github.com/linkinparkrulz/bip47-website-2" target="_blank" rel="noopener noreferrer" style="color: var(--accent-secondary);">
                            GitHub repository
                        </a>.
                    </p>
                </div>
            </section>

                    <div class="footer" style="margin-top: var(--space-2xl); padding-top: var(--space-xl); border-top: 1px solid var(--border-subtle);">
                        <div class="footer-text">Built with <span class="footer-heart">♥</span> for the cypherpunk community</div>
                        <div class="footer-text">Privacy is a human fight</div>
                    </div>
                </main>
            </div>
        </div>
    </div>

    <script>
        // Smooth scroll and active nav highlighting
        document.querySelectorAll('.sidebar-nav a').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const target = document.querySelector(link.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // Update active nav on scroll
        const sections = document.querySelectorAll('.doc-section');
        const navLinks = document.querySelectorAll('.sidebar-nav a');

        const observerOptions = {
            root: null,
            rootMargin: '-20% 0px -80% 0px',
            threshold: 0
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.getAttribute('id');
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === `#${id}`) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, observerOptions);

        sections.forEach(section => observer.observe(section));

        console.log('✅ Documentation page loaded');
    </script>
</body>
</html>
